<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard do Sistema de Pedidos</title>
    <!-- Inclui o Supabase JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Vincula seu arquivo CSS -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Estilos adicionais para o dashboard que complementam style.css */
        nav {
            margin-top: 20px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-start; /* Alinha os botões à esquerda */
        }
        main section {
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        li button {
            margin-left: 10px;
            padding: 5px 10px;
            font-size: 14px;
        }
        li span {
            flex-grow: 1;
            padding-right: 10px;
        }
        textarea {
            width: calc(100% - 24px); /* Ajusta para padding */
            min-height: 80px;
            resize: vertical;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box; /* Inclui padding e borda na largura total */
        }
        select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            width: 100%;
            box-sizing: border-box;
        }
        .admin-only {
            background-color: #ffeeba; /* Cor de fundo para seções de admin */
            border: 1px dashed #ffc107;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Bem-vindo ao Dashboard!</h1>
            <p>Gerencie seus clientes, serviços e pedidos.</p>
            <p>Usuário: <span id="user-email-display"></span> | Role: <span id="user-role-display"></span></p>
            <button id="logout-button">Sair</button>
        </header>

        <nav>
            <button id="show-clientes">Clientes</button>
            <button id="show-servicos">Serviços</button>
            <button id="show-pedidos">Pedidos</button>
            <!-- Seções visíveis apenas para Administradores -->
            <button id="show-companies" class="admin-feature" style="display: none;">Empresas</button>
            <button id="show-users" class="admin-feature" style="display: none;">Usuários</button>
        </nav>

        <main>
            <!-- Seção de Clientes -->
            <section id="clientes-section" style="display: block;">
                <h2>Meus Clientes</h2>
                <form id="cliente-form">
                    <input type="text" id="cliente-nome" placeholder="Nome do Cliente" required>
                    <input type="email" id="cliente-email" placeholder="E-mail">
                    <input type="text" id="cliente-telefone" placeholder="Telefone">
                    <input type="text" id="cliente-endereco" placeholder="Endereço">
                    <input type="text" id="cliente-cnpj-cpf" placeholder="CNPJ/CPF">
                    <input type="text" id="cliente-responsavel" placeholder="Responsável">
                    <button type="submit">Adicionar Cliente</button>
                </form>
                <h3>Lista de Clientes</h3>
                <ul id="clientes-list">
                    <!-- Clientes serão carregados aqui -->
                </ul>
            </section>

            <!-- Seção de Serviços -->
            <section id="servicos-section" style="display: none;">
                <h2>Meus Serviços</h2>
                <form id="servico-form">
                    <input type="text" id="servico-nome" placeholder="Nome do Serviço" required>
                    <textarea id="servico-descricao" placeholder="Descrição do Serviço"></textarea>
                    <input type="number" id="servico-preco" placeholder="Preço" step="0.01" required>
                    <button type="submit">Adicionar Serviço</button>
                </form>
                <h3>Lista de Serviços</h3>
                <ul id="servicos-list">
                    <!-- Serviços serão carregados aqui -->
                </ul>
            </section>

            <!-- Seção de Pedidos -->
            <section id="pedidos-section" style="display: none;">
                <h2>Meus Pedidos</h2>
                <form id="pedido-form">
                    <select id="pedido-cliente-select" required>
                        <option value="">Selecione um Cliente</option>
                        <!-- Clientes serão carregados aqui dinamicamente -->
                    </select>
                    <input type="number" id="pedido-valor-total" placeholder="Valor Total" step="0.01" required>
                    <button type="submit">Criar Pedido</button>
                </form>
                <h3>Lista de Pedidos</h3>
                <ul id="pedidos-list">
                    <!-- Pedidos serão carregados aqui -->
                </ul>
            </section>

            <!-- Seção de Gerenciamento de Empresas (APENAS ADMIN) -->
            <section id="companies-section" class="admin-only" style="display: none;">
                <h2>Gerenciar Empresas</h2>
                <form id="company-form">
                    <input type="text" id="company-name" placeholder="Nome da Nova Empresa" required>
                    <button type="submit">Criar Empresa</button>
                </form>
                <h3>Lista de Empresas</h3>
                <ul id="companies-list">
                    <!-- Empresas serão carregadas aqui -->
                </ul>
            </section>

            <!-- Seção de Gerenciamento de Usuários (APENAS ADMIN) -->
            <section id="users-section" class="admin-only" style="display: none;">
                <h2>Gerenciar Usuários</h2>
                <form id="user-creation-form">
                    <input type="email" id="new-user-email" placeholder="E-mail do Novo Usuário" required>
                    <input type="password" id="new-user-password" placeholder="Senha do Novo Usuário" required>
                    <input type="text" id="new-user-full-name" placeholder="Nome Completo (Opcional)">
                    <select id="new-user-role" required>
                        <option value="user">Usuário Comum</option>
                        <option value="admin">Administrador</option>
                    </select>
                    <select id="new-user-company-select" required>
                        <option value="">Selecione a Empresa</option>
                        <!-- Empresas serão carregadas aqui dinamicamente -->
                    </select>
                    <button type="submit">Criar Usuário</button>
                </form>
                <h3>Lista de Usuários</h3>
                <ul id="users-list">
                    <!-- Usuários serão carregados aqui -->
                </ul>
            </section>
        </main>
    </div>

    <!-- Vincula seu arquivo JavaScript do dashboard -->
    <script src="js/dashboard.js"></script>
</body>
</html>
